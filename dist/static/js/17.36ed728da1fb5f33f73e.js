webpackJsonp([17],{1096:function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return d});var i=n(964),a=function(t,e){return i.a.post("/order/purchase/page"+e,t)},r=function(t){return i.a.get("/order/purchase/"+t+"/map")},o=function(t){return i.a.post("/order/purchase/ndow/create",t)},d=function(t){return i.a.post("/order/purchase/receive",t)}},1132:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(347),a=n.n(i),r=n(1096);e.default={data:function(){return{purchasid:"111",cgdlists:[],cgdxq:"",cgarr:[],dis:!1,showbtn:!1}},computed:{moneycount:function(){for(var t=0,e=0;e<this.cgdlists.length;e++)t+=this.cgdlists[e].quantityReceived*this.cgdlists[e].price;return t}},mounted:function(){this.getPurchdetail()},methods:{getPurchdetail:function(){var t=this;this.purchasid=this.$route.params.id||this.$route.query.id;var e=this.purchasid;n.i(r.b)(e).then(function(e){if(0===e.data.result){t.cgdxq=e.data.data.purchaseVO,t.cgdlists=e.data.data.purchaseLineList;for(var n=0;n<t.cgdlists.length;n++)t.pjcount=t.pjcount+t.cgdlists[n].totalAmount;6===t.cgdxq.status?(t.dis=!0,t.showbtn=!1):5===t.cgdxq.status&&(t.dis=!1,t.showbtn=!0)}})},blursh:function(t){this.$validator.reset(),this.cgdlists[t].quantityReceived>this.cgdlists[t].quantity&&(this.$Message.warning("已收货数量不可大于采购数量!"),this.cgdlists[t].quantityReceived="")},receipt:function(t){var e=this;this.purchasid=this.$route.params.id||this.$route.query.id,this.cgarr=[];for(var i=0;i<this.cgdlists.length;i++){var o={id:this.cgdlists[i].id,quantityReceived:this.cgdlists[i].quantityReceived};this.cgarr.push(o)}var d={purchaseLineList:this.cgarr,purchaseVO:{id:this.purchasid}};n.i(r.c)(a()(d)).then(function(t){0===t.data.result&&(e.$Message.success("收货成功！"),e.getPurchdetail())})},validateBeforeshouhuo:function(){var t=this;this.$validator.validateAll({"已收货数量":this.pj.quantityReceived}).then(function(e){if(e)return void t.blur();t.$message.warning("请添加正确的工项价格！")})}}}},1163:function(t,e,n){e=t.exports=n(924)(!0),e.push([t.i,".com-mcen[data-v-05d20259]{margin:100px auto;text-align:center;width:300px;clear:both}.searchinput[data-v-05d20259]{width:100px;height:35px;border:1px solid #d3d3d3;text-indent:5px;text-align:center}.searchinput-red[data-v-05d20259]{width:100px;height:35px;border:1px solid red;text-indent:5px;text-align:center;color:red}.edit-order[data-v-05d20259]{width:99%!important;margin:0!important;margin-top:20px!important;text-align:left}.table-header[data-v-05d20259]{width:15%;height:40px;line-height:40px;font-size:18px;border-radius:20px 20px 0 0;background:#fdedb1;text-align:right;padding-right:30px;margin-top:20px}.order-box[data-v-05d20259]{width:100%!important;height:auto!important;border-radius:10px;padding-bottom:20px;margin:0!important;background:#fff}.order-table[data-v-05d20259]{display:inline-block;margin-top:0!important;width:100%;float:left}.purchase-details[data-v-05d20259]{background:#fff;width:100%;display:inline-block;border-radius:10px}.purchase-details ul[data-v-05d20259]{width:75%;margin-left:40px}.purchase-details li[data-v-05d20259]{float:left;width:40%;font-size:16px;line-height:50px}.color-red[data-v-05d20259]{color:#ef282a;font-size:20px;font-weight:700}.color-orange[data-v-05d20259]{color:#f3a340;font-size:26px!important;font-weight:700}.color-green-on[data-v-05d20259]{color:#3da577;font-size:20px;font-weight:700}.color-red-on[data-v-05d20259]{color:#ef282a;font-size:20px;font-weight:700}.purchase-title[data-v-05d20259]{background:#fdedb1;font-size:20px;width:160px;border-top-left-radius:10px;border-top-right-radius:10px;text-align:center;line-height:42px;margin-bottom:-20px;margin-top:20px}.ivu-page-item-active[data-v-05d20259]{background-color:#ffc900;border-color:#ffc900}.ivu-page-item[data-v-05d20259]:hover{border-color:#ffc900}","",{version:3,sources:["C:/Users/liyang/Desktop/garage_web1.2/src/pages/purchasing/purchasedetail.vue"],names:[],mappings:"AACA,2BACE,kBAAmB,AACnB,kBAAmB,AACnB,YAAa,AACb,UAAY,CACb,AACD,8BACE,YAAa,AACb,YAAa,AACb,yBAA4B,AAC5B,gBAAiB,AACjB,iBAAmB,CACpB,AACD,kCACE,YAAa,AACb,YAAa,AACb,qBAAsB,AACtB,gBAAiB,AACjB,kBAAmB,AACnB,SAAU,CACX,AACD,6BACE,oBAAsB,AACtB,mBAAqB,AACrB,0BAA4B,AAC5B,eAAiB,CAClB,AACD,+BACE,UAAU,AACV,YAAY,AACZ,iBAAiB,AACjB,eAAe,AACf,4BAA4B,AAC5B,mBAAmB,AACnB,iBAAkB,AAClB,mBAAoB,AACpB,eAAiB,CAClB,AACD,4BACE,qBAAsB,AACtB,sBAAwB,AACxB,mBAAoB,AACpB,oBAAqB,AACrB,mBAAwB,AACxB,eAAoB,CACrB,AACD,8BACE,qBAAsB,AACtB,uBAAyB,AACzB,WAAY,AACZ,UAAY,CACb,AACD,mCACE,gBAAgB,AAChB,WAAW,AACX,qBAAsB,AACtB,kBAAmB,CACpB,AACD,sCACE,UAAU,AACV,gBAAiB,CAClB,AACD,sCACE,WAAY,AACZ,UAAU,AACV,eAAe,AACf,gBAAiB,CAClB,AACD,4BACE,cAAc,AACd,eAAgB,AAChB,eAAkB,CACnB,AACD,+BACE,cAAc,AACd,yBAA2B,AAC3B,eAAkB,CACnB,AACD,iCACE,cAAc,AACd,eAAgB,AAChB,eAAkB,CACnB,AACD,+BACE,cAAc,AACd,eAAgB,AAChB,eAAkB,CACnB,AACD,iCACE,mBAAmB,AACnB,eAAe,AACf,YAAY,AACZ,4BAA6B,AAC7B,6BAA8B,AAC9B,kBAAmB,AACnB,iBAAkB,AAClB,oBAAqB,AACrB,eAAiB,CAClB,AACD,uCACE,yBAA0B,AAC1B,oBAAsB,CACvB,AACD,sCACE,oBAAsB,CACvB",file:"purchasedetail.vue",sourcesContent:["\n.com-mcen[data-v-05d20259]{\n  margin: 100px auto;\n  text-align: center;\n  width: 300px;\n  clear: both;\n}\n.searchinput[data-v-05d20259] {\n  width: 100px;\n  height: 35px;\n  border: 1px solid lightgray;\n  text-indent: 5px;\n  text-align: center;\n}\n.searchinput-red[data-v-05d20259] {\n  width: 100px;\n  height: 35px;\n  border: 1px solid red;\n  text-indent: 5px;\n  text-align: center;\n  color:red;\n}\n.edit-order[data-v-05d20259] {\n  width: 99% !important;\n  margin: 0 !important;\n  margin-top: 20px !important;\n  text-align: left;\n}\n.table-header[data-v-05d20259]{\n  width:15%;\n  height:40px;\n  line-height:40px;\n  font-size:18px;\n  border-radius:20px 20px 0 0;\n  background:#fdedb1;\n  text-align: right;\n  padding-right: 30px;\n  margin-top: 20px;\n}\n.order-box[data-v-05d20259] {\n  width:100% !important;\n  height: auto !important;\n  border-radius: 10px;\n  padding-bottom: 20px;\n  margin:0px 0 !important;\n  background: #ffffff;\n}\n.order-table[data-v-05d20259] {\n  display: inline-block;\n  margin-top:0px!important;\n  width: 100%;\n  float: left;\n}\n.purchase-details[data-v-05d20259]{\n  background:#fff;\n  width:100%;\n  display: inline-block;\n  border-radius:10px;\n}\n.purchase-details ul[data-v-05d20259]{\n  width:75%;\n  margin-left:40px;\n}\n.purchase-details li[data-v-05d20259]{\n  float: left;\n  width:40%;\n  font-size:16px;\n  line-height:50px;\n}\n.color-red[data-v-05d20259]{\n  color:#ef282a;\n  font-size: 20px;\n  font-weight: bold;\n}\n.color-orange[data-v-05d20259]{\n  color:#f3a340;\n  font-size: 26px !important;\n  font-weight: bold;\n}\n.color-green-on[data-v-05d20259]{\n  color:#3da577;\n  font-size: 20px;\n  font-weight: bold;\n}\n.color-red-on[data-v-05d20259]{\n  color:#ef282a;\n  font-size: 20px;\n  font-weight: bold;\n}\n.purchase-title[data-v-05d20259]{\n  background:#fdedb1;\n  font-size:20px;\n  width:160px;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  text-align: center;\n  line-height: 42px;\n  margin-bottom: -20px;\n  margin-top: 20px;\n}\n.ivu-page-item-active[data-v-05d20259] {\n  background-color: #ffc900;\n  border-color: #ffc900;\n}\n.ivu-page-item[data-v-05d20259]:hover {\n  border-color: #ffc900;\n}\n\n"],sourceRoot:""}])},1189:function(t,e,n){var i=n(1163);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(925)("962a23fe",i,!0)},1242:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-order"},[n("div",{staticClass:"purchase-details"},[n("ul",[n("li",{staticClass:"color-orange"},[t._v("订单号:"+t._s(t.purchasid))]),t._v(" "),n("li",[n("span",{staticClass:"color-green-on"},[t._v("● 采购状态："+t._s(t._f("purchastatus")(t.cgdxq.status)))])]),t._v(" "),n("li",[n("span",[t._v("供应商：")]),t._v(t._s(t.cgdxq.supplierName))]),t._v(" "),n("li",[n("span",[t._v("结算方式：")]),t._v(t._s(t._f("statementType")(t.cgdxq.payType)))]),t._v(" "),n("li",[n("span",[t._v("单据时间：")]),t._v(t._s(t.cgdxq.creatTime))]),t._v(" "),n("li",[n("span",[t._v("收货时间：")]),t._v(t._s(t.cgdxq.arrivalTime))]),t._v(" "),n("li",[n("span",[t._v("合计采购数量：")]),n("span",{staticClass:"color-red"},[t._v(t._s(t.cgdxq.totalCount))])]),t._v(" "),n("li",[n("span",[t._v("实际收货数量：")]),n("span",{staticClass:"color-red"},[t._v(t._s(t.cgdxq.actotalCount))])])])]),t._v(" "),n("div",{staticClass:"table-header"},[t._v("采购清单: 总计:"),n("span",{staticStyle:{color:"red"}},[t._v(t._s(t._f("money")(t.moneycount)))]),t._v("元")]),t._v(" "),n("div",{staticClass:"order-box"},[n("div",{staticClass:"order-table"},[n("table",{attrs:{cellpadding:"0",cellspacing:"0"}},[n("tbody",[t._m(0),t._v(" "),t._l(t.cgdlists,function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(i+1))]),t._v(" "),n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.model))]),t._v(" "),n("td",[t._v(t._s(e.brand))]),t._v(" "),n("td",[t._v(t._s(e.quantity))]),t._v(" "),n("td",[n("form",{on:{submit:function(e){e.preventDefault(),t.validateBeforeshouhuo(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.quantityReceived,expression:"pj.quantityReceived"},{name:"validate",rawName:"v-validate",value:"required|numeric|max:9|min_value:0",expression:"'required|numeric|max:9|min_value:0'"}],staticClass:"searchinput",attrs:{type:"text",disabled:t.dis,name:"已收货数量"},domProps:{value:e.quantityReceived},on:{focus:function(e){t.cgdlists.activeItem=i},blur:function(e){t.blursh(i)},input:function(t){t.target.composing||(e.quantityReceived=t.target.value)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.cgdlists.activeItem===i&&t.errors.has("已收货数量"),expression:"cgdlists.activeItem===item && errors.has('已收货数量')"}],staticStyle:{color:"red","z-index":"999"}},[t._v(t._s(t.errors.first("已收货数量")))])])]),t._v(" "),n("td",[t._v(t._s(t._f("money")(e.price)))]),t._v(" "),n("td",[t._v(t._s(e.quantityReceived*e.price))])])}),t._v(" "),n("tr",[n("td",{staticStyle:{"padding-right":"10px","border-top":"1px solid lightgray","border-bottom":"1px solid lightgray","text-align":"right","font-size":"18px",color:"red"},attrs:{colspan:"9"}},[t._v("总计:"),n("span",[t._v(t._s(t._f("money")(t.moneycount)))]),t._v("元")])])],2)])]),t._v(" "),n("div",{staticClass:"com-mcen"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showbtn,expression:"showbtn"}],staticClass:"complete01",on:{click:t.receipt}},[t._v("确认收货")])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("序号")]),t._v(" "),n("th",[t._v("配件名称")]),t._v(" "),n("th",[t._v("规格型号")]),t._v(" "),n("th",[t._v("品牌")]),t._v(" "),n("th",[t._v("采购数量")]),t._v(" "),n("th",[t._v("已收货数量")]),t._v(" "),n("th",[t._v("采购单价")]),t._v(" "),n("th",[t._v("合计")])])}]}},952:function(t,e,n){function i(t){n(1189)}var a=n(346)(n(1132),n(1242),i,"data-v-05d20259",null);t.exports=a.exports},964:function(t,e,n){"use strict";var i=n(348),a=n.n(i),r=n(349),o=n.n(r),d=n(96),s=n(211),A=n.n(s),c=n(965);d.default.use(A.a);var l=o.a.create({baseURL:c.a,headers:{"Content-Type":"application/json"},timeout:1e5,transformRequest:[function(t){return FormData,console.log(t),t}]});l.interceptors.request.use(function(t){return t.headers.token=d.default.cookie.get("login"),t},function(t){return a.a.reject(t)}),l.interceptors.response.use(function(t){return t},function(t){return a.a.reject(t)}),e.a=l},965:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a});var i="",a="http://image.cds.bakheet.cn";i="http://192.168.4.70:2222",a="http://192.168.4.62"}});
//# sourceMappingURL=17.36ed728da1fb5f33f73e.js.map